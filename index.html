<!DOCTYPE html>
<html>
<head>
    <title>Invoice PT. Krishand Style</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>üìã Invoice Generator</h1>

        <!-- Company Info -->
        <div class="section">
            <h2>Shipper Company Information</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Company Name</label>
                    <input type="text" id="companyName" value="CV RIEKI SENROKU CREATIVE">
                </div>
                <div class="form-group">
                    <label>Company Address</label>
                    <input type="text" id="companyAddress" value="Jakarta Selatan - Indonesia">
                </div>
            </div>
        </div>

        <!-- Client Info -->
        <div class="section">
            <h2>Recipient Company Information</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Client Name</label>
                    <input type="text" id="clientName" value="PT ISM BOGASARI FLOUR JAKARTA">
                </div>
                <div class="form-group">
                    <label>Client Address</label>
                    <input type="text" id="clientAddress" value="Jl. Raya Clinchip, Tanjung Priok">
                </div>
                <div class="form-group">
                    <label>Client City</label>
                    <input type="text" id="clientCity" value="Jakarta Utara - 14110">
                </div>
            </div>
        </div>

        <!-- Invoice Details -->
        <div class="section">
            <h2>Detail Invoice</h2>
            <div class="form-row">
                <div class="form-group" style="position: relative;">
                    <label>Invoice Number
                    </label>
                    <input type="text" id="invoiceNumber" >
                </div>
                <div class="form-group">
                    <label>Invoice Date</label>
                    <input type="date" id="invoiceDate">
                    <small style="color: #666; margin-top: 5px; display: block;">
                        Default: Today
                    </small>
                </div>
            </div>
        </div>

        <!-- Bank Info -->
        <div class="section">
            <h2>Payment Information</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Bank Name</label>
                    <input type="text" id="bankName" value="">
                </div>
                <div class="form-group">
                    <label>Account Number</label>
                    <input type="text" id="accountNumber" value="">
                </div>
                <div class="form-group">
                    <label>Account Name</label>
                    <input type="text" id="accountName" value="">
                </div>
            </div>
        </div>

        <!-- Items Section dengan Dropdown SOW -->
        <div class="section">
            <h2>Scope of Work <button type="button" onclick="addItem()">+ Add SoW</button></h2>
            <div id="itemsContainer">
                <div class="item-row">
                    <!-- Dropdown SOW akan diisi oleh JavaScript -->
                    <select class="item-sow-dropdown" onchange="selectSOW(this)">
                        <option value="">Choose Scope of Work</option>
                        <!-- Options akan ditambah oleh JS -->
                    </select>

                    <input type="text" placeholder="Custom Scope of Work" class="item-name" style="display: none;">

                    <input type="text" placeholder="Description" class="item-description" value="">

                    <input type="number" placeholder="QTY" class="item-qty" value="1" min="1" onchange="previewInvoice()">

                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" placeholder="Unit Price" class="item-price" value="0" style="flex: 1;" onchange="previewInvoice()">
                        <input type="number" placeholder="Gross Up %" class="item-grossup" value="0" min="0" max="1000"
                               style="width: 80px;" title="Persentase kenaikan harga" onchange="previewInvoice()">
                    </div>

                    <button type="button" onclick="removeItem(this)" class="remove-btn">√ó</button>
                </div>
            </div>
        </div>

        <!-- Gross Up Calculator (optional) -->
        <div class="section" style="background: #f8f9fa; padding: 15px;">
            <h3>üìä Gross Up Calculator</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div>
                    <label>Base Price</label>
                    <input type="number" id="basePrice" placeholder="Harga dasar" value="1000000">
                </div>
                <div>
                    <label>Gross Up (%)</label>
                    <input type="number" id="grossUpPercent" placeholder="Persentase" value="10" min="0" max="1000">
                </div>
                <div>
                    <label>Gross Up Result</label>
                    <input type="text" id="grossUpResult" readonly style="background: #e9ecef;">
                </div>
                <div style="display: flex; align-items: flex-end;">
                    <button onclick="calculateGrossUp()" style="padding: 10px 15px;">Count</button>
                </div>
            </div>
        </div>

        <!-- Additional Info -->
        <div class="section">
            <h2>Additional Info</h2>
            <div class="form-row">
                <div class="form-group">
                    <label>Discount (%) <small>(fill in 0 to hide)</small></label>
                    <input type="number" id="discountPercent" value="0" min="0" max="100">
                </div>
                <div class="form-group">
                    <label>PPH 23 (%) <small>(fill in 0 to hide)</small></label>
                    <input type="number" id="taxPercent" value="0" min="0" max="100">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Signatory Name</label>
                    <input type="text" id="signatoryName" value="Sherly Fanny Heriyanti">
                </div>
                <div class="form-group">
                    <label>Signatory Title</label>
                    <input type="text" id="signatoryTitle" value="Persero Pengurus CV">
                </div>
            </div>

            <!-- SIGNATURE UPLOAD SECTION -->
            <div class="form-row">
                <div class="form-group">
                    <label>Upload Signature (Optional)</label>
                    <input type="file" id="signatureUpload" accept="image/*">
                    <small style="display: block; margin-top: 5px; color: #666;">
                        Format: JPG, PNG. Recommended size: 500x200px
                    </small>
                    <div id="signaturePreview" style="margin-top: 15px; display: none; text-align: center;">
                        <div style="margin-bottom: 10px; font-weight: bold;">Signature Preview:</div>
                        <img id="signatureImage" class="signature-image">
                        <br>
                        <button type="button" onclick="removeSignature()" class="remove-signature-btn">Remove Signature</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="actions">
            <button onclick="previewInvoice()">üëÅÔ∏è Preview Invoice</button>
            <button onclick="generatePDF()" class="generate-btn">üì• Download PDF</button>
        </div>

        <!-- Invoice Preview -->
        <div id="invoicePreview" class="invoice-preview">
            <!-- PDF content will be generated here -->
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
